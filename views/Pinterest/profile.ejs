<%- include('../partiels/header.ejs') %>
    <%- include('../partiels/nav.ejs') %>

        <div class="profile w-full min-h-screen bg-zinc-800 text-white pt-1">
            <!--  -->
            <form hidden id="uploadfrom" action="/fileupload" method="post" enctype="multipart/form-data">
                <input type="file" name="image">
            </form>
            <!--  -->
            <div class="profdets flex flex-col items-center mt-20">
                <div class="relative">
                    <span id="uploadicon"
                        class="absolute w-8 h-8 bottom-0 right-0 rounded-full flex items-center justify-center bg-zinc-200">
                        <i class="text-zinc-800 cursor-pointer ri-pencil-fill"></i>
                    </span>
                    <div class="w-32 h-32 bg-zinc-200 rounded-full overflow-hidden">
                        <img class="w-full h-full object-cover" src="/images/uploads/<%= user.dp %>" alt="">
                    </div>
                </div>
                <h1 class="text-2xl font-semibold mt-3">
                    <%= user.fullname %>
                </h1>
                <h3 class="text-sm">@<%= user.username %>
                </h3>
                <a href="/edit" class="px-6 mt-3 font-semibold text-xs py-1 bg-zinc-700 rounded-full">Edit</a>
                <a href="/add" class="px-10 py-2 rounded-lg bg-red-700 text-xs font-semibold mt-10">Add New Post</a
                    href="/add">
            </div>
            <!--  -->
            <div class="cards flex flex-wrap gap-10 px-10 mt-10">
                <% if(user.posts.length !== 0) { %>
                    <div class="card">
                        <div class="w-52 h-40 bg-zinc-200 rounded-md overflow-hidden">
                            <img class="w-full h-full object-cover" src="/images/uploads/<%= user.posts[0].image %>" alt="">
                        </div>
                        <a href="/show/posts" class="inline-block font-semibold text-xl mt-3">Your Uploaded Pins</a>
                        <h5 class="text-sm font-medium opacity-60">
                            <%= user.posts.length %> Pins
                        </h5>
                    </div>
                    <% } %>

                        <!-- <div class="card">
                            <div class="w-52 h-40 bg-zinc-200 rounded-md overflow-hidden">
                                <img class="w-full h-full object-cover"
                                    src="https://i.pinimg.com/564x/ec/23/74/ec23741b29f684ca7ffa821b8eaecbd8.jpg"
                                    alt="">
                            </div>
                            <h3 class="font-semibold text-xl mt-3">All Pins</h3>
                            <h5 class="text-sm font-medium opacity-60">28 pins</h5>
                        </div> -->
            </div>

        </div>

        <script>
            document.querySelector('#uploadicon').addEventListener('click', () => {
                document.querySelector('#uploadfrom input').click();
            })
            document.querySelector('#uploadfrom input').addEventListener('change', () => {
                document.querySelector('#uploadfrom').submit();
            })
        </script>

        <%- include('../partiels/footer.ejs') %>